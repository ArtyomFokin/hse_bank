# Модуль "Учет финансов". Фокин Артём Владимирович БПИ238

## Общая идея решения

Данное решение реализует модуль «Учет финансов», позволяющий вести учет личных финансов пользователей банка. Основной функционал включает:
- **Работу с доменной моделью:** создание, редактирование и удаление счетов, категорий и операций (доходов и расходов).
- **Аналитику:** подсчёт разницы между доходами и расходами за заданный период, а также (при необходимости) группировку операций по категориям.
- **Импорт и экспорт данных:** возможность загрузки и сохранения информации о счетах, категориях и операциях в форматах JSON, CSV и YAML с использованием шаблонного метода для импорта и паттерна Посетитель для экспорта.
- **Управление данными:** пересчёт баланса счета на основании зарегистрированных операций.
- **Измерение времени выполнения сценариев:** через реализацию паттерна Команда с декоратором для замера времени.

Решение построено по принципам «Чистой архитектуры» с разделением на слои: **Domain**, **Factories**, **Services**, **Commands**, **ImportExport**, **Proxies** и **ConsoleApp** (пользовательский интерфейс).

## Принципы SOLID и GRASP

В разработке решения активно использованы следующие принципы:

- **Single Responsibility Principle (SRP):**  
  Каждый класс выполняет только свою задачу. Например, класс `Account` отвечает исключительно за представление банковского счета и обработку операций, а фабрики (`AccountFactory`, `CategoryFactory`, `OperationFactory`) отвечают за создание объектов с базовой валидацией.

- **Open/Closed Principle (OCP):**  
  Классы доменной модели и сервисов разработаны таким образом, что при добавлении новой функциональности не требуется изменять уже существующий код – новые сценарии реализуются посредством команд и декораторов.

- **Liskov Substitution Principle (LSP):**  
  Интерфейсы сервисов (например, `IBankAccountService`, `ICategoryService`, `IOperationService`) позволяют подставлять различные реализации без изменения логики работы приложения.

- **Interface Segregation Principle (ISP):**  
  Применение мелких специализированных интерфейсов (например, для сервисов и команд) обеспечивает минимальную зависимость клиентов от ненужных методов.

- **Dependency Inversion Principle (DIP):**  
  Высокоуровневые модули (например, консольное приложение) зависят от абстракций (интерфейсов сервисов), а не от конкретных реализаций. Это позволяет легко подменять компоненты при необходимости.

- **High Cohesion и Low Coupling (GRASP):**  
  Каждый модуль и класс отвечает за свою чётко определённую задачу (высокая сцепленность), а зависимости между модулями сведены к минимуму (низкое связывание). Это делает систему гибкой и легко расширяемой.

## Использованные паттерны GoF

В решении применены следующие паттерны проектирования:

- **Порождающие паттерны:**
  - **Фабрика:** Фабрики (`AccountFactory`, `CategoryFactory`, `OperationFactory`) централизуют создание объектов доменной модели, гарантируя корректную валидацию и унифицированное создание экземпляров.
  
- **Структурные паттерны:**
  - **Фасад:** (Опционально) можно создать фасад, объединяющий функциональность сервисного слоя (например, `FinanceManager`), что упрощает взаимодействие с системой.
  - **Прокси:** Прокси-сервисы (`BankAccountServiceProxy`, `CategoryServiceProxy`, `OperationServiceProxy`, `AnalyticsServiceProxy`) добавляют дополнительные возможности (логирование, кеширование) к вызовам основных сервисов без изменения их внутренней логики.

- **Поведенческие паттерны:**
  - **Команда:** Реализованы команды для создания, редактирования и удаления объектов (например, `CreateAccountCommand`, `UpdateOperationCommand`, `DeleteCategoryCommand`), что позволяет инкапсулировать сценарии пользовательских действий.
  - **Декоратор:** Декоратор команд (`TimedCommandDecorator`) измеряет время выполнения пользовательских сценариев, предоставляя статистику работы системы.
  - **Шаблонный метод:** В слое импорта реализован шаблонный метод (класс `ImporterBase` и его наследники), что позволяет одинаково обрабатывать загрузку данных из различных форматов (JSON, CSV, YAML).
  - **Посетитель:** Для экспорта данных реализован паттерн Посетитель (интерфейс `IExportVisitor` и его реализации), позволяющий добавлять новые форматы экспорта без изменения доменной модели.

## Структура проекта

Проект разделён на следующие модули:
- **Domain:** содержит классы `Account`, `Category`, `Operation` с базовой бизнес-логикой.
- **Factories:** включает фабрики для создания объектов доменной модели.
- **Services:** реализует сервисы для работы с доменными объектами и аналитикой.
- **Commands:** содержит команды для выполнения пользовательских сценариев (создание, редактирование, удаление) и декоратор для измерения времени.
- **ImportExport:** отвечает за импорт и экспорт данных в форматы JSON, CSV и YAML.
- **Proxies:** реализует прокси-сервисы для добавления логирования и других функций.
- **ConsoleApp:** консольное приложение, обеспечивающее взаимодействие с пользователем через меню.

## Инструкция по запуску

1. **Сборка проекта:**  
   Откройте решение в Visual Studio 2022 и выполните Build → Rebuild Solution.

2. **Запуск приложения:**  
   Убедитесь, что в консольном проекте (например, FinancialAccounting.ConsoleApp) настроены ссылки на все необходимые проекты (Domain, Factories, Services, Commands, ImportExport, Proxies). Запустите приложение через Visual Studio (F5 или Ctrl+F5).

3. **Работа с приложением:**  
   При запуске откроется меню, где вы сможете:
   - Создавать, редактировать и удалять счета, категории и операции.
   - Добавлять операции (доходы/расходы) и регистрировать их на счетах.
   - Запрашивать аналитические данные (подсчёт разницы доходов и расходов, группировку операций).
   - Импортировать и экспортировать данные в различных форматах (при реализации импорта/экспорта).
   - Измерять время выполнения команд (через декоратор).

## Заключение

Решение соответствует всем основным требованиям задания:
- Реализована доменная модель с базовыми сущностями.
- Применены принципы SOLID и GRASP для достижения высокой модульности, гибкости и поддерживаемости кода.
- Использованы паттерны GoF (Фабрика, Фасад, Команда, Декоратор, Шаблонный метод, Посетитель, Прокси) для решения типичных задач разработки.
- Предоставлен пользовательский интерфейс через консольное приложение, позволяющее взаимодействовать с системой.

Это решение демонстрирует, как можно построить функциональный модуль «Учет финансов» с применением современных архитектурных принципов и паттернов, что позволит в дальнейшем легко расширять и поддерживать систему.

